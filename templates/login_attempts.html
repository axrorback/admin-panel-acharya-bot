{% extends "base.html" %}
{% block content %}

<div class="container mt-4">
  <h2 class="mb-4 text-center">
    <i class="bi bi-shield-lock-fill text-danger"></i>
    Login Urinishlari
  </h2>

  <div class="card shadow-lg border-0 rounded-3">
    <div class="card-body p-0">
      <table class="table table-striped table-hover table-bordered align-middle mb-0">
        <thead class="table-dark text-center">
          <tr>
            <th>#</th>
            <th>👤 Username</th>
            <th>🔒 Parol</th>
            <th>🌐 IP</th>
            <th>💻 Device</th>
            <th>⚙️ Raw UA</th>
            <th>📊 Status</th>
            <th>📅 Vaqt</th>
          </tr>
        </thead>
        <tbody>
          {% for log in attempts %}
          <tr>
            <td class="text-muted text-center">{{ loop.index }}</td>
            <td><i class="bi bi-person-fill text-primary"></i> <strong>{{ log["username"] }}</strong></td>
            <td class="text-danger text-center">
              <i class="bi bi-lock-fill"></i> {{ "*****" if log["password"] else "" }}
            </td>
            <td><i class="bi bi-wifi text-success"></i> {{ log["ip_address"] }}</td>
            <td><i class="bi bi-laptop text-info"></i> {{ log["device"] }}</td>
            <td style="max-width:260px; word-break:break-word;" class="small text-muted">
              <i class="bi bi-terminal"></i> {{ log["user_agent"] }}
            </td>
            <td class="text-center">
              {% if log["status"] == "success" %}
                <span class="badge bg-success px-3 py-2">
                  <i class="bi bi-check-circle-fill"></i> Success
                </span>
              {% else %}
                <span class="badge bg-danger px-3 py-2">
                  <i class="bi bi-x-circle-fill"></i> Fail
                </span>
              {% endif %}
            </td>
            <td class="text-nowrap"><i class="bi bi-calendar-event text-secondary"></i> {{ log["created_at"] }}</td>
          </tr>
          {% else %}
          <tr>
            <td colspan="8" class="text-center text-muted py-4">
              <i class="bi bi-emoji-frown fs-4"></i> Hali login urinishlari yo‘q
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

{% endblock %}
